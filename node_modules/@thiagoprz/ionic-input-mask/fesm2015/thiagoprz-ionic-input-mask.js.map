{"version":3,"file":"thiagoprz-ionic-input-mask.js","sources":["../../../../projects/thiagoprz/ionic-input-mask/src/lib/ionic-input-mask.directive.ts","../../../../projects/thiagoprz/ionic-input-mask/src/lib/ionic-input-mask.module.ts","../../../../projects/thiagoprz/ionic-input-mask/src/public-api.ts","../../../../projects/thiagoprz/ionic-input-mask/src/thiagoprz-ionic-input-mask.ts"],"sourcesContent":["import { Attribute, Directive } from '@angular/core';\nimport { NgModel } from \"@angular/forms\";\n\n@Directive({\n  selector: '[mask]',\n  host: {\n    '(keydown)': 'onInputChange($event)'\n  },\n  providers: [NgModel]\n})\nexport class IonicInputMaskDirective {\n\n  pattern: string;\n\n  /**\n   * Construtor\n   * @param {NgModel} model\n   * @param {string} pattern\n   */\n  constructor(public model: NgModel,\n              @Attribute('mask') pattern: string) {\n    this.pattern = pattern;\n  }\n\n  /**\n   * Listener para mudan√ßa de valor do input\n   * @param event\n   */\n  onInputChange(event: any) {\n    let value = event.target.value,\n      pattern = this.pattern;\n    if (event.keyIdentifier === 'U+0008' || event.keyCode === 8 || event.key === 'Backspace') {\n      if (value.length) { //prevent fatal exception when backspacing empty value in progressive web app\n        //remove all trailing formatting then delete character\n        while (pattern[value.length] && pattern[value.length] !== '*') {\n          value = value.substring(0, value.length - 1);\n        }\n        //remove all leading formatting to restore placeholder\n        if (pattern.substring(0, value.length).indexOf('*') < 0) {\n          value = value.substring(0, value.length - 1);\n        }\n      }\n    } else {\n      let maskIndex = value.length,\n        formatted = '';\n      if (value.length === 1 && value !== pattern[0]) {\n        //apply leading formatting\n        maskIndex = 0;\n        while (maskIndex < pattern.length && pattern[maskIndex] !== '*') {\n          formatted += pattern[maskIndex];\n          maskIndex++;\n        }\n      }\n      formatted += value;\n      if (maskIndex < pattern.length) {\n        //apply trailing formatting\n        while (pattern[maskIndex] !== '*') {\n          formatted += pattern[maskIndex];\n          maskIndex++;\n        }\n      }\n      value = formatted;\n    }\n    event.target.value = value;\n    if (this.model) {\n      this.model.update.emit(value);\n    }\n    return true;\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport {IonicInputMaskDirective} from \"./ionic-input-mask.directive\";\n\n\n\n@NgModule({\n  declarations: [IonicInputMaskDirective],\n  imports: [\n  ],\n  exports: [IonicInputMaskDirective]\n})\nexport class IonicInputMaskModule { }\n","/*\n * Public API Surface of ionic-input-mask\n */\n\nexport * from './lib/ionic-input-mask.directive';\nexport * from './lib/ionic-input-mask.module';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":";;;MAUa,uBAAuB;;;;;;IASlC,YAAmB,KAAc,EACF,OAAe;QAD3B,UAAK,GAAL,KAAK,CAAS;QAE/B,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;KACxB;;;;;IAMD,aAAa,CAAC,KAAU;QACtB,IAAI,KAAK,GAAG,KAAK,CAAC,MAAM,CAAC,KAAK,EAC5B,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC;QACzB,IAAI,KAAK,CAAC,aAAa,KAAK,QAAQ,IAAI,KAAK,CAAC,OAAO,KAAK,CAAC,IAAI,KAAK,CAAC,GAAG,KAAK,WAAW,EAAE;YACxF,IAAI,KAAK,CAAC,MAAM,EAAE;;gBAEhB,OAAO,OAAO,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,OAAO,CAAC,KAAK,CAAC,MAAM,CAAC,KAAK,GAAG,EAAE;oBAC7D,KAAK,GAAG,KAAK,CAAC,SAAS,CAAC,CAAC,EAAE,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;iBAC9C;;gBAED,IAAI,OAAO,CAAC,SAAS,CAAC,CAAC,EAAE,KAAK,CAAC,MAAM,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE;oBACvD,KAAK,GAAG,KAAK,CAAC,SAAS,CAAC,CAAC,EAAE,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;iBAC9C;aACF;SACF;aAAM;YACL,IAAI,SAAS,GAAG,KAAK,CAAC,MAAM,EAC1B,SAAS,GAAG,EAAE,CAAC;YACjB,IAAI,KAAK,CAAC,MAAM,KAAK,CAAC,IAAI,KAAK,KAAK,OAAO,CAAC,CAAC,CAAC,EAAE;;gBAE9C,SAAS,GAAG,CAAC,CAAC;gBACd,OAAO,SAAS,GAAG,OAAO,CAAC,MAAM,IAAI,OAAO,CAAC,SAAS,CAAC,KAAK,GAAG,EAAE;oBAC/D,SAAS,IAAI,OAAO,CAAC,SAAS,CAAC,CAAC;oBAChC,SAAS,EAAE,CAAC;iBACb;aACF;YACD,SAAS,IAAI,KAAK,CAAC;YACnB,IAAI,SAAS,GAAG,OAAO,CAAC,MAAM,EAAE;;gBAE9B,OAAO,OAAO,CAAC,SAAS,CAAC,KAAK,GAAG,EAAE;oBACjC,SAAS,IAAI,OAAO,CAAC,SAAS,CAAC,CAAC;oBAChC,SAAS,EAAE,CAAC;iBACb;aACF;YACD,KAAK,GAAG,SAAS,CAAC;SACnB;QACD,KAAK,CAAC,MAAM,CAAC,KAAK,GAAG,KAAK,CAAC;QAC3B,IAAI,IAAI,CAAC,KAAK,EAAE;YACd,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;SAC/B;QACD,OAAO,IAAI,CAAC;KACb;;;YAjEF,SAAS,SAAC;gBACT,QAAQ,EAAE,QAAQ;gBAClB,IAAI,EAAE;oBACJ,WAAW,EAAE,uBAAuB;iBACrC;gBACD,SAAS,EAAE,CAAC,OAAO,CAAC;aACrB;;;YARQ,OAAO;yCAmBD,SAAS,SAAC,MAAM;;;MCTlB,oBAAoB;;;YANhC,QAAQ,SAAC;gBACR,YAAY,EAAE,CAAC,uBAAuB,CAAC;gBACvC,OAAO,EAAE,EACR;gBACD,OAAO,EAAE,CAAC,uBAAuB,CAAC;aACnC;;;ACVD;;;;ACAA;;;;;;"}