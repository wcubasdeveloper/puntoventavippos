{"version":3,"file":"thiagoprz-ionic-input-mask.umd.js","sources":["../../../../projects/thiagoprz/ionic-input-mask/src/lib/ionic-input-mask.directive.ts","../../../../projects/thiagoprz/ionic-input-mask/src/lib/ionic-input-mask.module.ts","../../../../projects/thiagoprz/ionic-input-mask/src/public-api.ts","../../../../projects/thiagoprz/ionic-input-mask/src/thiagoprz-ionic-input-mask.ts"],"sourcesContent":["import { Attribute, Directive } from '@angular/core';\nimport { NgModel } from \"@angular/forms\";\n\n@Directive({\n  selector: '[mask]',\n  host: {\n    '(keydown)': 'onInputChange($event)'\n  },\n  providers: [NgModel]\n})\nexport class IonicInputMaskDirective {\n\n  pattern: string;\n\n  /**\n   * Construtor\n   * @param {NgModel} model\n   * @param {string} pattern\n   */\n  constructor(public model: NgModel,\n              @Attribute('mask') pattern: string) {\n    this.pattern = pattern;\n  }\n\n  /**\n   * Listener para mudan√ßa de valor do input\n   * @param event\n   */\n  onInputChange(event: any) {\n    let value = event.target.value,\n      pattern = this.pattern;\n    if (event.keyIdentifier === 'U+0008' || event.keyCode === 8 || event.key === 'Backspace') {\n      if (value.length) { //prevent fatal exception when backspacing empty value in progressive web app\n        //remove all trailing formatting then delete character\n        while (pattern[value.length] && pattern[value.length] !== '*') {\n          value = value.substring(0, value.length - 1);\n        }\n        //remove all leading formatting to restore placeholder\n        if (pattern.substring(0, value.length).indexOf('*') < 0) {\n          value = value.substring(0, value.length - 1);\n        }\n      }\n    } else {\n      let maskIndex = value.length,\n        formatted = '';\n      if (value.length === 1 && value !== pattern[0]) {\n        //apply leading formatting\n        maskIndex = 0;\n        while (maskIndex < pattern.length && pattern[maskIndex] !== '*') {\n          formatted += pattern[maskIndex];\n          maskIndex++;\n        }\n      }\n      formatted += value;\n      if (maskIndex < pattern.length) {\n        //apply trailing formatting\n        while (pattern[maskIndex] !== '*') {\n          formatted += pattern[maskIndex];\n          maskIndex++;\n        }\n      }\n      value = formatted;\n    }\n    event.target.value = value;\n    if (this.model) {\n      this.model.update.emit(value);\n    }\n    return true;\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport {IonicInputMaskDirective} from \"./ionic-input-mask.directive\";\n\n\n\n@NgModule({\n  declarations: [IonicInputMaskDirective],\n  imports: [\n  ],\n  exports: [IonicInputMaskDirective]\n})\nexport class IonicInputMaskModule { }\n","/*\n * Public API Surface of ionic-input-mask\n */\n\nexport * from './lib/ionic-input-mask.directive';\nexport * from './lib/ionic-input-mask.module';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":["Directive","NgModel","Attribute","NgModule"],"mappings":";;;;;;;;;;;;QAmBE,iCAAmB,KAAc,EACF,OAAe;YAD3B,UAAK,GAAL,KAAK,CAAS;YAE/B,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;SACxB;;;;;QAMD,+CAAa,GAAb,UAAc,KAAU;YACtB,IAAI,KAAK,GAAG,KAAK,CAAC,MAAM,CAAC,KAAK,EAC5B,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC;YACzB,IAAI,KAAK,CAAC,aAAa,KAAK,QAAQ,IAAI,KAAK,CAAC,OAAO,KAAK,CAAC,IAAI,KAAK,CAAC,GAAG,KAAK,WAAW,EAAE;gBACxF,IAAI,KAAK,CAAC,MAAM,EAAE;;oBAEhB,OAAO,OAAO,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,OAAO,CAAC,KAAK,CAAC,MAAM,CAAC,KAAK,GAAG,EAAE;wBAC7D,KAAK,GAAG,KAAK,CAAC,SAAS,CAAC,CAAC,EAAE,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;qBAC9C;;oBAED,IAAI,OAAO,CAAC,SAAS,CAAC,CAAC,EAAE,KAAK,CAAC,MAAM,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE;wBACvD,KAAK,GAAG,KAAK,CAAC,SAAS,CAAC,CAAC,EAAE,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;qBAC9C;iBACF;aACF;iBAAM;gBACL,IAAI,SAAS,GAAG,KAAK,CAAC,MAAM,EAC1B,SAAS,GAAG,EAAE,CAAC;gBACjB,IAAI,KAAK,CAAC,MAAM,KAAK,CAAC,IAAI,KAAK,KAAK,OAAO,CAAC,CAAC,CAAC,EAAE;;oBAE9C,SAAS,GAAG,CAAC,CAAC;oBACd,OAAO,SAAS,GAAG,OAAO,CAAC,MAAM,IAAI,OAAO,CAAC,SAAS,CAAC,KAAK,GAAG,EAAE;wBAC/D,SAAS,IAAI,OAAO,CAAC,SAAS,CAAC,CAAC;wBAChC,SAAS,EAAE,CAAC;qBACb;iBACF;gBACD,SAAS,IAAI,KAAK,CAAC;gBACnB,IAAI,SAAS,GAAG,OAAO,CAAC,MAAM,EAAE;;oBAE9B,OAAO,OAAO,CAAC,SAAS,CAAC,KAAK,GAAG,EAAE;wBACjC,SAAS,IAAI,OAAO,CAAC,SAAS,CAAC,CAAC;wBAChC,SAAS,EAAE,CAAC;qBACb;iBACF;gBACD,KAAK,GAAG,SAAS,CAAC;aACnB;YACD,KAAK,CAAC,MAAM,CAAC,KAAK,GAAG,KAAK,CAAC;YAC3B,IAAI,IAAI,CAAC,KAAK,EAAE;gBACd,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;aAC/B;YACD,OAAO,IAAI,CAAC;SACb;;;;gBAjEFA,cAAS,SAAC;oBACT,QAAQ,EAAE,QAAQ;oBAClB,IAAI,EAAE;wBACJ,WAAW,EAAE,uBAAuB;qBACrC;oBACD,SAAS,EAAE,CAACC,aAAO,CAAC;iBACrB;;;gBARQA,aAAO;6CAmBDC,cAAS,SAAC,MAAM;;;;QCT/B;;;;;gBANCC,aAAQ,SAAC;oBACR,YAAY,EAAE,CAAC,uBAAuB,CAAC;oBACvC,OAAO,EAAE,EACR;oBACD,OAAO,EAAE,CAAC,uBAAuB,CAAC;iBACnC;;;ICVD;;;;ICAA;;;;;;;;;;;;;"}